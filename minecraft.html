<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Minecraft World</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script>
        let scene, camera, renderer;
        let player, controls;
        let world = [];

        const blockSize = 1;
        const worldWidth = 100, worldHeight = 10, worldDepth = 100;
        
        // Create the scene, camera, and renderer
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Create a basic cube geometry
        function createBlock(x, y, z, color) {
            const geometry = new THREE.BoxGeometry(blockSize, blockSize, blockSize);
            const material = new THREE.MeshBasicMaterial({ color: color });
            const block = new THREE.Mesh(geometry, material);
            block.position.set(x, y, z);
            scene.add(block);
            return block;
        }

        // Generate a basic world
        function generateWorld() {
            for (let x = 0; x < worldWidth; x++) {
                for (let y = 0; y < worldHeight; y++) {
                    for (let z = 0; z < worldDepth; z++) {
                        let blockColor = 0x808080; // Default is stone

                        // Create dirt at the surface
                        if (y === 0) {
                            blockColor = 0x6E4B3A; // Dirt color
                        }

                        // Add trees (simple cubes as trees)
                        if (y === 1 && Math.random() < 0.01) {
                            blockColor = 0x228B22; // Tree leaves
                            createBlock(x, y + 1, z, blockColor);
                        }

                        world.push(createBlock(x * blockSize, y * blockSize, z * blockSize, blockColor));
                    }
                }
            }
        }

        // Create player (simple cube for now)
        function createPlayer() {
            const geometry = new THREE.BoxGeometry(0.6, 1.8, 0.6);
            const material = new THREE.MeshBasicMaterial({ color: 0x00FF00 });
            player = new THREE.Mesh(geometry, material);
            player.position.set(50, 1, 50);  // Start position in the center
            scene.add(player);
        }

        // Movement logic (WASD for movement, space for jumping)
        let speed = 0.1;
        let jumpSpeed = 0.2;
        let gravity = -0.02;
        let isJumping = false;
        let velocity = new THREE.Vector3();

        function handleMovement() {
            let moveForward = false, moveBackward = false, moveLeft = false, moveRight = false, jump = false;

            // Listen for keyboard input
            document.addEventListener('keydown', (event) => {
                if (event.key === 'w') moveForward = true;
                if (event.key === 's') moveBackward = true;
                if (event.key === 'a') moveLeft = true;
                if (event.key === 'd') moveRight = true;
                if (event.key === ' ') jump = true;
            });

            // Handle movement based on keys pressed
            let direction = new THREE.Vector3();
            if (moveForward) direction.z -= 1;
            if (moveBackward) direction.z += 1;
            if (moveLeft) direction.x -= 1;
            if (moveRight) direction.x += 1;
            
            // Normalize direction for consistent speed in all directions
            direction.normalize().multiplyScalar(speed);
            velocity.x = direction.x;
            velocity.z = direction.z;

            // Jump logic
            if (jump && !isJumping) {
                velocity.y = jumpSpeed;
                isJumping = true;
            }

            // Apply gravity
            velocity.y += gravity;

            // Move player
            player.position.add(velocity);

            // Prevent going through the ground
            if (player.position.y <= 1) {
                player.position.y = 1;
                isJumping = false;
            }
        }

        // Camera control with mouse
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = event.clientX / window.innerWidth - 0.5;
            mouseY = event.clientY / window.innerHeight - 0.5;
        });

        // Set up controls
        function setupControls() {
            camera.rotation.set(mouseY * 0.5, mouseX * 0.5, 0);
        }

        // Render the scene
        function animate() {
            requestAnimationFrame(animate);
            handleMovement();
            setupControls();
            renderer.render(scene, camera);
        }

        // Initialize the world and player
        generateWorld();
        createPlayer();

        // Camera position
        camera.position.set(player.position.x, player.position.y + 2, player.position.z + 5);

        // Start the animation
        animate();
    </script>
</body>
</html>
